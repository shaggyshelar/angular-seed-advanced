<form novalidate (ngSubmit)="onSubmit(employmentHistoryForm)" [formGroup]="employmentHistoryForm">
    <div class="portlet box yellow border-color">
        <div class="portlet-title div-color">
            <div class="caption title">
                {{ 'EMPLOYMENT_DETAILS' | translate }}
            </div>
            <div class="actions">
                <span class="div-actions"> 
                <i class="fa fa-check-circle"></i> {{ 'REQUIRES_APPROVAL' | translate }}  
            </span>
            </div>
        </div>
        <div class="portlet-body">
            <div *ngIf="employmentHistory.length == 0">
                <hr>
                <h5> {{ 'NO_RECORDS' | translate }}</h5>
            </div>
            <div *ngIf="employmentHistory.length > 0">
                <p-dataTable [value]="employmentHistory" [responsive]="true" emptyMessage="{{ 'NO_RECORDS' | translate }}">
                    <p-column header="{{ 'EDIT' | translate }}">
                        <template let-employmentHistoryData="rowData" pTemplate type="body">
                            <i class="fa fa-pencil icon-color" (click)="editEmploymentHistory(employmentHistoryData)"></i>
                        </template>
                    </p-column>
                    <p-column header="{{ 'EMPLOYMENT_DETAILS' | translate }}" field="employementDetails"></p-column>
                    <p-column header="{{ 'DESIGNATION' | translate }}" field="designation"></p-column>
                    <p-column header="{{ 'START_DATE' | translate }}" field="startDate"></p-column>
                    <p-column header="{{ 'END_DATE' | translate }}" field="endDate"></p-column>
                    <p-column header="{{ 'DURATION' | translate }}" field="duration"></p-column>
                    <p-column header="{{ 'STATUS' | translate }}" field="status"></p-column>
                    <p-column header="{{ 'COMMENTS' | translate }}" field="comment"></p-column>
                </p-dataTable>
            </div>
            <div *ngIf="!showDiv">
                <div class="row row-margin">
                    <div class="col-md-3 col-margin">
                        <span>{{ 'EMPLOYMENT_DETAILS' | translate }}</span>
                        <span class="req-field"> *</span>
                        <div class="div-margin">
                            <input type="text" class="form-control" id="employmentHistory_employementDetails" formControlName="employementDetails" placeholder="">
                            <div class="alert alert-danger" *ngIf="employmentHistoryForm.get('employementDetails').hasError('required') && employmentHistoryForm.get('employementDetails').touched">
                                {{ 'PLEASE_ENTER' | translate }} {{ 'EMPLOYMENT_DETAILS' | translate }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-margin">
                        <span>{{ 'DESIGNATION' | translate }}</span>
                        <span class="req-field"> *</span>
                        <div class="div-margin">
                            <input type="text" class="form-control" id="employmentHistory_designation" formControlName="designation" placeholder="">
                            <div class="alert alert-danger" *ngIf="employmentHistoryForm.get('designation').hasError('required') && employmentHistoryForm.get('designation').touched">
                                {{ 'PLEASE_ENTER' | translate }} {{ 'DESIGNATION' | translate }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-margin">
                        <span>{{ 'START_DATE' | translate }}</span>
                        <span class="req-field"> *</span>
                        <div class="div-margin">
                            <p-calendar [showIcon]="true" id="employmentHistory_startDate" formControlName="startDate" dateFormat="dd/mm/yy" readonlyInput="readonlyInput"></p-calendar>
                            <div class="alert alert-danger" *ngIf="employmentHistoryForm.get('startDate').hasError('required') && employmentHistoryForm.get('startDate').touched">
                                {{ 'PLEASE_ENTER' | translate }} {{ 'START_DATE' | translate }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-margin">
                        <span>{{ 'END_DATE' | translate }}</span>
                        <span class="req-field"> *</span>
                        <div class="div-margin">
                            <p-calendar [showIcon]="true" id="employmentHistory_endDate" formControlName="endDate" dateFormat="dd/mm/yy" readonlyInput="readonlyInput"></p-calendar>
                            <div class="alert alert-danger" *ngIf="employmentHistoryForm.get('endDate').hasError('required') && employmentHistoryForm.get('endDate').touched">
                                {{ 'PLEASE_ENTER' | translate }} {{ 'END_DATE' | translate }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row row-margin button-margin">
                    <button pButton type="submit" label="{{ 'SUBMIT' | translate }}" [disabled]="employmentHistoryForm.invalid"></button>
                    <button pButton type="text" label="{{ 'CANCEL' | translate }}" (click)="cancel()"></button>
                </div>
            </div>
            <div class="row row-margin button-margin" *ngIf="showDiv">
                <button pButton type="text" icon="fa fa-plus" (click)="onAddClick()" label="{{ 'ADD_NEW_EMPLOYMENT' | translate }}"></button>
            </div>
        </div>
    </div>
</form>

<div class="portlet box yellow border-color">
    <div class="portlet-title div-color">
        <div class="caption title">
            {{ 'LAST_EMPLOYER_DETAILS' | translate }}
            <i class="fa fa-pencil icon-css" (click)="addLastEmployer()"></i>
        </div>
        <div class="actions">
            <span class="div-actions">           
                <i class="fa fa-check-circle"></i> {{ 'REQUIRES_APPROVAL' | translate }}  
            </span>
        </div>
    </div>
    <div class="portlet-body">
        <div class="row">
            <div class="col-md-6">
                <table class="table table-bordered detail-table">
                    <tbody>
                        <tr>
                            <td><b>{{ 'FIRST_MONTH_SALARY_SLIP' | translate }}</b></td>
                            <td>
                                {{ lastEmployerDetails.length > 0 ? lastEmployerDetails[0].firstMonth : '' }}
                            </td>
                        </tr>
                        <tr>
                            <td><b>{{ 'SECOND_MONTH_SALARY_SLIP' | translate }}</b></td>
                            <td>
                                <span> {{ lastEmployerDetails.length > 0 ? lastEmployerDetails[0].secondMonth : '' }}</span>
                            </td>
                        </tr>
                        <tr>
                            <td><b>{{ 'THIRD_MONTH_SALARY_SLIP' | translate }}</b></td>
                            <td>
                                <span> {{ lastEmployerDetails.length > 0 ? lastEmployerDetails[0].thirdDate : '' }} </span>
                            </td>
                        </tr>
                        <tr>
                            <td><b>{{ 'EXP_LETTER_ONE' | translate }}</b></td>
                            <td>
                                <span> {{ lastEmployerDetails.length > 0 ? lastEmployerDetails[0].expLetterOne : '' }} </span>
                            </td>
                        </tr>
                        <tr>
                            <td><b>{{ 'EXP_LETTER_TWO' | translate }}</b></td>
                            <td>
                                <span> {{ lastEmployerDetails.length > 0 ? lastEmployerDetails[0].expLetterSecond : '' }}</span>
                            </td>
                        </tr>
                        <tr>
                            <td><b>{{ 'STATUS' | translate }}</b></td>
                            <td>
                                <span> {{ lastEmployerDetails.length > 0 ? lastEmployerDetails[0].status : '' }}</span>
                            </td>
                        </tr>
                        <tr>
                            <td><b>{{ 'HR_COMMENT' | translate }}</b></td>
                            <td>
                                <span> {{ lastEmployerDetails.length > 0 ? lastEmployerDetails[0].hrComments : '' }} </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="col-md-6">
                <div *ngIf="!showEmployerDiv">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>{{ 'FIRST_MONTH_SALARY_SLIP' | translate }} </label>
                                <div class="div-margin">
                                    <input type="file" id="firstMonthSalarySlip">
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label>{{ 'SECOND_MONTH_SALARY_SLIP' | translate }} </label>
                                <div class="div-margin">
                                    <input type="file" id="secondMonthSalarySlip">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>{{ 'THIRD_MONTH_SALARY_SLIP' | translate }} </label>
                                <div class="div-margin">
                                    <input type="file" id="thirdMonthSalarySlip">
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label>{{ 'EXP_LETTER_ONE' | translate }} </label>
                                <div class="div-margin">
                                    <input type="file" id="expLetterOne">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>{{ 'EXP_LETTER_TWO' | translate }} </label>
                                <div class="div-margin">
                                    <input type="file" id="expLetterTwo">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button pButton type="text" label="{{ 'SUBMIT' | translate }}" (click)="submitLastEmployer()"></button>
                    <button pButton type="text" label="{{ 'CANCEL' | translate }}" (click)="cancelLastEmployer()"></button>
                </div>
            </div>
        </div>
    </div>
</div>